{"version":3,"names":[],"mappings":"","sources":["script.js"],"sourcesContent":["'use strict';\r\n\r\nconst trello = document.querySelector('.trello');\r\nconst todoLists = document.querySelectorAll('.trello__todo-list');\r\n\r\nlet todoNum = 0;\r\nlet startTodoNum;\r\nconst todos = [];\r\n\r\n// ================== FUNCTIONS:\r\n\r\n// == Add to local storage:\r\nconst safeLocalTodos = function(todo) {\r\n  let todos;\r\n  \r\n  // Check:\r\n  if (!localStorage.getItem('todos')) todos = [];\r\n    else todos = JSON.parse(localStorage.getItem('todos'));\r\n\r\n  // If exist push:\r\n  todos.push(todo);\r\n  localStorage.setItem('todos', JSON.stringify(todos)); \r\n}\r\n\r\n// == Render Todo:\r\nconst renderTodo = function(todoList) {\r\n  // Create todo element:\r\n  const todo = document.createElement('li');\r\n  todo.classList.add('trello__todo');\r\n  todoList.append(todo);\r\n\r\n  const html = `\r\n    <textarea type=\"text\" class=\"trello__todo-text\"></textarea>\r\n  `;\r\n\r\n  // Add textarea:\r\n  todo.insertAdjacentHTML('afterbegin', html);\r\n}\r\n\r\n// == Save Todo:\r\nconst saveTodo = function(textareaValue, todoList) {\r\n  // Create todo:\r\n  const todo = document.createElement('li');\r\n  todo.classList.add('trello__todo-saved');\r\n  todo.setAttribute('data-index', todoNum);\r\n  todo.draggable =\"true\";\r\n  todoList.append(todo);\r\n  \r\n  const html = `\r\n    <p draggable=\"true\">${textareaValue}</p>\r\n  `;\r\n\r\n  // Add textarea:\r\n  todo.insertAdjacentHTML('afterbegin', html);\r\n\r\n  // Delete text area:\r\n  todo.previousElementSibling.remove();\r\n  todoNum++;\r\n  todos.push(todo);\r\n\r\n  // Safe local todos:\r\n  safeLocalTodos(textareaValue);\r\n}\r\n\r\n// == Get Todos from local storage:\r\nconst getTodos = function() {\r\n  let todos;\r\n\r\n  // Check:\r\n  if (!localStorage.getItem('todos')) todos = [];\r\n    else todos = JSON.parse(localStorage.getItem('todos'));\r\n  \r\n  //console.log(todos);\r\n  //todos.forEach(todo => saveTodo(todo,));  \r\n};\r\n\r\n// ================== EVENT LISTENERS:\r\n// == Add Todo:\r\ntrello.addEventListener('click', (e) => {\r\n  const addBtn = e.target.closest('.trello__add-item');\r\n  if(!addBtn) return;\r\n  const trelloItem = addBtn.closest('.trello__item');\r\n  const todoList = trelloItem.querySelector('.trello__todo-list');\r\n  \r\n  // Render Todo:\r\n  renderTodo(todoList);\r\n  addBtn.classList.toggle('hidden');\r\n  addBtn.nextElementSibling.classList.toggle('hidden');\r\n  addBtn.nextElementSibling.style.marginLeft = 'auto';\r\n  todoList.classList.toggle('first-in-order');\r\n});\r\n\r\n// == Save Todo:\r\ntrello.addEventListener('click', (e) => {\r\n  const saveBtn = e.target.closest('.trello__save-item');\r\n  if(!saveBtn) return;\r\n  const trelloItem = saveBtn.closest('.trello__item');\r\n  const textarea = trelloItem.querySelector('.trello__todo-text');\r\n  const todoList = trelloItem.querySelector('.trello__todo-list');\r\n  const addBtn = trelloItem.querySelector('.trello__add-item');\r\n  const buttons = trelloItem.querySelector('.trello__buttons');\r\n  // Save Todo:\r\n  saveTodo(textarea.value, todoList);\r\n  // Delete button:\r\n  saveBtn.classList.toggle('hidden');\r\n  // Add add button:\r\n  addBtn.classList.toggle('hidden');\r\n  buttons.classList.add('first-in-order');\r\n});\r\n\r\n// == Get Todos from local storage:\r\ndocument.addEventListener('DOMContentLoaded', getTodos);\r\n\r\n\r\n// ==================== DRAG AND DROP\r\n\r\n// == Drag Start:\r\nconst dragStart = function(todo) {\r\n  startTodoNum = +todo.getAttribute('data-index');\r\n}\r\n\r\n// == Drag Over:\r\nconst dragOver = function(e) {\r\n  e.preventDefault(); \r\n}\r\n\r\n// == Swap:\r\nconst swapTodos = function(startTodoNum, toTodoNum) {\r\n  const todoOne = todos[startTodoNum];\r\n  const todoTwo = todos[toTodoNum];\r\n  const todoOneLi = todoOne.closest('.trello__todo-list');\r\n  const todoTwoLi = todoTwo.closest('.trello__todo-list');\r\n  // Now swap in DOM:\r\n  todoOneLi.append(todoTwo);\r\n  todoTwoLi.append(todoOne);\r\n}\r\n\r\n// == Drag drop:\r\nconst dragDrop = function() {\r\n  const toTodoNum = +this.querySelector('.trello__todo-saved').getAttribute('data-index');\r\n  swapTodos(startTodoNum, toTodoNum);\r\n}\r\n\r\n// ========== EVENT LISTENERS:\r\ntrello.addEventListener('dragstart', (e) => {\r\n  const todo = e.target.closest('.trello__todo-saved');\r\n  if(!todo) return;\r\n  dragStart(todo);\r\n});\r\n\r\ntodoLists.forEach(todo => {\r\n  todo.addEventListener('dragover', dragOver);\r\n  todo.addEventListener('drop', dragDrop);\r\n})\r\n\r\n\r\n\r\n\r\n\r\n"],"file":"script.js"}